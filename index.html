<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fun Expense Tracker</title>
  <style>
    body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f5f5f5;
    color: #333;
    transition: background 0.3s, color 0.3s;
  }
  
  header {
    background-color: #4CAF50;
    color: white;
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
  }
  
  header h1 i {
    margin-right: 0.5rem;
  }
  
  nav {
    background-color: #333;
    display: flex;
    flex-wrap: wrap;
  }
  
  nav button {
    flex: 1;
    padding: 1rem;
    color: white;
    background: none;
    border: none;
    cursor: pointer;
    transition: background 0.3s;
  }
  
  nav button:hover {
    background-color: #555;
  }
  
  .page {
    display: none;
    padding: 1rem;
  }
  
  .cards {
    display: flex;
    gap: 1rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
  }
  
  .card {
    background-color: #eee;
    padding: 1rem;
    border-radius: 12px;
    flex: 1;
    min-width: 140px;
    text-align: center;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: transform 0.3s;
  }
  
  .card:hover {
    transform: translateY(-5px);
  }
  
  .card.income { background-color: #d4edda; color: #155724; }
  .card.expense { background-color: #f8d7da; color: #721c24; }
  .card.savings { background-color: #fff3cd; color: #856404; }
  
  form input, form select, form button, label {
    display: block;
    margin: 0.5rem 0;
    padding: 0.5rem;
    width: 100%;
  }
  
  button {
    cursor: pointer;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 6px;
    transition: background 0.3s;
  }
  
  button:hover {
    background-color: #45a049;
  }
  
  .dark-mode {
    background-color: #121212;
    color: white;
  }
  
  .dark-mode header {
    background-color: #1e1e1e;
  }
  
  .dark-mode nav button {
    color: white;
  }
  
  .dark-mode .card.income { background-color: #1b4332; color: #d4edda; }
  .dark-mode .card.expense { background-color: #611a15; color: #f8d7da; }
  .dark-mode .card.savings { background-color: #664d03; color: #fff3cd; }
  
  @media (max-width: 600px) {
    nav button { flex: 100%; }
    .cards { flex-direction: column; }
  }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
  <header>
    <h1><i class="fa-solid fa-wallet"></i>  Expense Tracker</h1>
    <button id="toggleTheme"><i class="fa-solid fa-moon"></i></button>
  </header>

  <nav>
    <button onclick="showPage('dashboard')"><i class="fa-solid fa-chart-pie"></i> Dashboard</button>
    <button onclick="showPage('addIncome')"><i class="fa-solid fa-arrow-down"></i> Add Income</button>
    <button onclick="showPage('addExpense')"><i class="fa-solid fa-arrow-up"></i> Add Expense</button>
    <button onclick="showPage('reports')"><i class="fa-solid fa-table"></i> Reports</button>
  </nav>

  <main>
    <!-- Dashboard -->
    <section id="dashboard" class="page">
      <h2>Dashboard</h2>
      <div class="cards">
        <div class="card income"><i class="fa-solid fa-money-bill-wave"></i> Total Income: â‚¹<span id="totalIncome">0</span></div>
        <div class="card expense"><i class="fa-solid fa-credit-card"></i> Total Expenses: â‚¹<span id="totalExpenses">0</span></div>
        <div class="card savings"><i class="fa-solid fa-coins"></i> Savings: â‚¹<span id="savings">0</span></div>
      </div>
      <div>
        <label for="monthFilter">Filter Month: </label>
        <input type="month" id="monthFilter">
      </div>
      <h3>Recent Transactions</h3>
      <ul id="recentTransactions" class="animate__animated animate__fadeIn"></ul>
    </section>

    <!-- Add Income -->
    <section id="addIncome" class="page">
      <h2>Add Income</h2>
      <form id="incomeForm">
        <input type="number" id="incomeAmount" placeholder="Amount" required>
        <input type="text" id="incomeSource" placeholder="Source (Salary, Gift, etc.)" required>
        <input type="date" id="incomeDate" required>
        <button type="submit"><i class="fa-solid fa-plus"></i> Add Income</button>
      </form>
    </section>

    <!-- Add Expense -->
    <section id="addExpense" class="page">
      <h2>Add Expense</h2>
      <form id="expenseForm">
        <input type="number" id="expenseAmount" placeholder="Amount" required>
        <input type="text" id="expenseCategory" placeholder="Category (Food, Transport, etc.)" required>
        <input type="text" id="expenseTag" placeholder="Tag (optional)">
        <input type="date" id="expenseDate" required>
        <label><input type="checkbox" id="expenseRecurring"> Recurring Monthly</label>
        <button type="submit"><i class="fa-solid fa-plus"></i> Add Expense</button>
      </form>
    </section>

    <!-- Reports -->
    <section id="reports" class="page">
      <h2>Reports</h2>
      <canvas id="expenseChart" width="400" height="200"></canvas>
      <button onclick="exportCSV()"><i class="fa-solid fa-download"></i> Export CSV</button>
    </section>
  </main>

  <script>
    // Page navigation
function showPage(pageId) {
    document.querySelectorAll('.page').forEach(p => p.style.display = 'none');
    document.getElementById(pageId).style.display = 'block';
  }
  showPage('dashboard'); // default
  
  // Theme toggle
  const toggleThemeBtn = document.getElementById('toggleTheme');
  toggleThemeBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
  });
  
  // Local Storage setup
  let incomes = JSON.parse(localStorage.getItem('incomes')) || [];
  let expenses = JSON.parse(localStorage.getItem('expenses')) || [];
  let recurringExpenses = JSON.parse(localStorage.getItem('recurringExpenses')) || [];
  
  // Add Income
  document.getElementById('incomeForm').addEventListener('submit', e => {
    e.preventDefault();
    const amount = parseFloat(document.getElementById('incomeAmount').value);
    const source = document.getElementById('incomeSource').value;
    const date = document.getElementById('incomeDate').value;
    incomes.push({ amount, source, date });
    localStorage.setItem('incomes', JSON.stringify(incomes));
    e.target.reset();
    updateDashboard();
    Swal.fire('Success!', 'Income Added!', 'success');
  });
  
  // Add Expense
  document.getElementById('expenseForm').addEventListener('submit', e => {
    e.preventDefault();
    const amount = parseFloat(document.getElementById('expenseAmount').value);
    const category = document.getElementById('expenseCategory').value;
    const tag = document.getElementById('expenseTag').value;
    const date = document.getElementById('expenseDate').value;
    const recurring = document.getElementById('expenseRecurring').checked;
  
    expenses.push({ amount, category, tag, date });
    if (recurring) {
      recurringExpenses.push({ amount, category, tag, startDate: date });
      localStorage.setItem('recurringExpenses', JSON.stringify(recurringExpenses));
    }
    localStorage.setItem('expenses', JSON.stringify(expenses));
    e.target.reset();
    updateDashboard();
    renderChart();
    Swal.fire('Success!', 'Expense Added!', 'success');
  });
  
  // Recurring Expenses
  function applyRecurringExpenses() {
    const today = new Date().toISOString().split('T')[0];
    recurringExpenses.forEach(r => {
      const lastAdded = expenses.find(e => e.category === r.category && e.date === today);
      if (!lastAdded) expenses.push({ amount: r.amount, category: r.category, tag: r.tag, date: today });
    });
    localStorage.setItem('expenses', JSON.stringify(expenses));
  }
  applyRecurringExpenses();
  
  // Dashboard
  function updateDashboard() {
    const totalIncome = incomes.reduce((a,b) => a + b.amount, 0);
    const totalExpenses = expenses.reduce((a,b) => a + b.amount, 0);
    const savings = totalIncome - totalExpenses;
    document.getElementById('totalIncome').textContent = totalIncome.toFixed(2);
    document.getElementById('totalExpenses').textContent = totalExpenses.toFixed(2);
    document.getElementById('savings').textContent = savings.toFixed(2);
  
    const recent = [...incomes.map(i => `Income: â‚¹${i.amount} (${i.source}) on ${i.date}`),
                    ...expenses.map(e => `Expense: â‚¹${e.amount} (${e.category}) on ${e.date}`)]
                    .sort((a,b) => new Date(b.date) - new Date(a.date))
                    .slice(0,5);
    document.getElementById('recentTransactions').innerHTML = recent.map(r => `<li>${r}</li>`).join('');
  
    // Fun badge
    if(savings >= 1000) Swal.fire('ðŸŽ‰ Great Job!', `You saved â‚¹${savings.toFixed(2)} this month!`, 'success');
  }
  
  // Chart
  function renderChart(filterMonth = null) {
    const ctx = document.getElementById('expenseChart').getContext('2d');
    let filteredExpenses = expenses;
    if(filterMonth) filteredExpenses = expenses.filter(e => e.date.startsWith(filterMonth));
  
    const categories = [...new Set(filteredExpenses.map(e => e.category))];
    const amounts = categories.map(c => filteredExpenses.filter(e => e.category===c).reduce((a,b)=> a+b.amount,0));
  
    if(window.expenseChart) window.expenseChart.destroy();
    window.expenseChart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: categories,
        datasets: [{
          data: amounts,
          backgroundColor: categories.map(()=>'#'+Math.floor(Math.random()*16777215).toString(16))
        }]
      },
      options: {
        onClick: (evt, item) => {
          if(item.length > 0){
            const idx = item[0].index;
            const cat = categories[idx];
            const trans = expenses.filter(e=>e.category===cat).map(e=>`â‚¹${e.amount} on ${e.date} [${e.tag}]`).join('<br>');
            Swal.fire({title:`${cat} Transactions`, html: trans, icon:'info'});
          }
        }
      }
    });
  }
  
  // Month filter
  document.getElementById('monthFilter').addEventListener('change', e => renderChart(e.target.value));
  
  // Export CSV
  function exportCSV() {
    let csv = 'Type,Amount,Category/Source,Tag,Date\n';
    incomes.forEach(i=> csv += `Income,${i.amount},${i.source},,${i.date}\n`);
    expenses.forEach(e=> csv += `Expense,${e.amount},${e.category},${e.tag},${e.date}\n`);
    const blob = new Blob([csv], {type:'text/csv'});
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = 'expenses.csv';
    link.click();
  }
  
  // Initialize
  updateDashboard();
  renderChart();
  
  </script>
</body>
</html>


