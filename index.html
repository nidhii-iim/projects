<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> Budget & Expense Tracker</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
/* --- Realistic Background --- */
body {
  margin:0;
  font-family: 'Segoe UI', Tahoma, sans-serif;
  background: linear-gradient(135deg,#4a90e2,#50e3c2);
  overflow-x:hidden;
  position:relative;
}
.float-shape{
  position:absolute;
  width:50px; height:50px;
  background: rgba(255,255,255,0.1);
  border-radius:50%;
  animation: float 20s linear infinite;
}
@keyframes float{
  0%{transform:translateY(100vh) translateX(0);}
  100%{transform:translateY(-10vh) translateX(100vw);}
}

/* --- Navigation --- */
nav{
  background: rgba(0,0,0,0.6);
  color:white;
  padding:15px 20px;
  display:flex; justify-content:space-between; align-items:center;
  position:sticky; top:0; z-index:100;
  border-bottom:1px solid white;
  flex-wrap:wrap;
}
nav h1{font-size:1.4rem;margin-bottom:5px;}
nav ul{list-style:none;display:flex;gap:15px;flex-wrap:wrap;}
nav ul li a{color:white;text-decoration:none;font-weight:bold;cursor:pointer;}
nav ul li a:hover{text-decoration:underline;}

/* --- Sections --- */
main{max-width:1000px;margin:20px auto;padding:0 20px; position:relative; z-index:1;}
section{display:none;animation:fadeIn 0.5s;}
section.active{display:block;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}

/* --- Cards --- */
.cards{display:flex;gap:20px;flex-wrap:wrap;margin-bottom:30px;}
.card{
  background:white;padding:20px;border-radius:10px;
  flex:1;min-width:200px;box-shadow:0 4px 8px rgba(0,0,0,0.2);
  text-align:center;position:relative;transition:transform 0.3s;
}
.card:hover{transform:translateY(-5px);}
.card h3{margin-bottom:10px;color:#333;}
.card p{font-size:1.3rem;font-weight:bold;margin-bottom:10px;}
.progress-bar{height:15px;background:#ddd;border-radius:10px;overflow:hidden;margin-top:5px;}
#progress-fill,#level-fill,#goal-fill{height:100%;width:0%;background:#4a90e2;transition:width 1s ease;}

/* --- Forms --- */
form{background:white;padding:20px;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.2);
margin-bottom:30px;display:flex;flex-wrap:wrap;gap:15px;}
form input,form select{padding:12px;border:1px solid #ccc;border-radius:5px;flex:1;min-width:120px;font-size:1rem;}
form button{background:#4a90e2;color:white;border:none;padding:12px 20px;border-radius:5px;cursor:pointer;transition:all 0.3s;font-size:1rem;}
form button:hover{background:#357ab8;transform:scale(1.05);}

/* --- Lists --- */
#expense-list,#recent-expenses{margin-top:20px;list-style:none;}
#expense-list li,#recent-expenses li{background:white;padding:10px 15px;margin-bottom:10px;border-radius:5px;
display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 4px rgba(0,0,0,0.1);}
.delete-btn{background:red;color:white;border:none;border-radius:5px;padding:5px 10px;cursor:pointer;transition:all 0.3s;}
.delete-btn:hover{transform:scale(1.1);}

/* --- Charts --- */
.chart-container{background:white;padding:20px;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.2);margin-bottom:30px;overflow-x:auto;}

/* --- Challenge Popup --- */
#challenge-popup{
  position:fixed;top:20%;left:50%;transform:translateX(-50%);
  background:white;padding:20px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.5);
  display:none; z-index:200; text-align:center; animation:popup 0.5s;
  max-width:90%;
}
@keyframes popup{0%{transform:translateX(-50%) scale(0);}100%{transform:translateX(-50%) scale(1);}}
#challenge-popup button{margin-top:10px; padding:10px 20px; border:none;border-radius:5px;background:#4a90e2;color:white; cursor:pointer;}
#challenge-popup button:hover{background:#357ab8;}

/* --- Confetti & Animations --- */
.badge{display:inline-block;background:#f5a623;color:white;padding:5px 10px;border-radius:5px;margin-top:10px;animation:pop 0.6s;}
@keyframes pop{0%{transform:scale(0);}60%{transform:scale(1.3);}100%{transform:scale(1);}}
.confetti{position:absolute;width:10px;height:10px;background:orange;opacity:0.7;animation:fall linear forwards;}
@keyframes fall{0%{transform:translateY(0) rotate(0deg);}100%{transform:translateY(500px) rotate(360deg);opacity:0;}}
.streak{color:#e67e22;font-weight:bold;animation:glow 1s infinite alternate;}
@keyframes glow{0%{text-shadow:0 0 5px #e67e22;}100%{text-shadow:0 0 20px #f39c12;}}

/* --- Responsive --- */
@media(max-width:768px){
  .cards{flex-direction:column;}
  nav{flex-direction:column;align-items:flex-start;}
  nav ul{flex-wrap:wrap;}
  form input, form select, form button{flex:1 1 100%;}
  .chart-container{padding:10px;}
  #expense-list li, #recent-expenses li{flex-direction:column;align-items:flex-start;}
}
</style>
</head>
<body>

<!-- Floating shapes for background -->
<div class="float-shape" style="left:10%; width:40px;height:40px;"></div>
<div class="float-shape" style="left:40%; width:60px;height:60px;"></div>
<div class="float-shape" style="left:70%; width:50px;height:50px;"></div>

<!-- Navigation -->
<nav>
    <h1>Budget Tracker</h1>
    <ul>
        <li><a onclick="showSection('dashboard')">Dashboard</a></li>
        <li><a onclick="showSection('add-expense')">Add Expense</a></li>
        <li><a onclick="showSection('reports')">Reports</a></li>
        <li><a onclick="showSection('emotions')">Emotions</a></li>
        <li><a onclick="showSection('settings')">Settings</a></li>
    </ul>
</nav>

<main>
<!-- Dashboard -->
<section id="dashboard" class="active">
  <h2>Dashboard</h2>
  <div class="cards">
    <div class="card"><h3>Total Budget</h3><p id="total-budget">â‚¹0</p></div>
    <div class="card"><h3>Total Expense</h3><p id="total-expense">â‚¹0</p></div>
    <div class="card"><h3>Remaining</h3><p id="remaining-budget">â‚¹0</p><div class="progress-bar"><div id="progress-fill"></div></div></div>
    <div class="card"><h3>Level: <span id="level">1</span></h3><div class="progress-bar"><div id="level-fill"></div></div><div id="badges"></div><p id="streak" class="streak"></p></div>
  </div>
  <h3>Recent Expenses</h3>
  <ul id="recent-expenses"></ul>
  <div class="cards">
    <div class="card"><h3>Savings Goal</h3><p id="goal-progress">â‚¹0 / â‚¹0</p><div class="progress-bar"><div id="goal-fill"></div></div></div>
    <div class="card"><h3>Top Category</h3><p id="top-category">-</p></div>
  </div>
</section>

<!-- Add Expense -->
<section id="add-expense">
<h2>Add Expense</h2>
<form id="expense-form">
<input type="text" id="name" placeholder="Expense Name" required>
<input type="number" id="amount" placeholder="Amount (â‚¹)" required>
<input type="date" id="date" required>
<select id="category" required>
<option value="">Select Category</option>
<option value="Food">Food</option>
<option value="Transport">Transport</option>
<option value="Shopping">Shopping</option>
<option value="Others">Others</option>
</select>
<select id="emotion" required>
<option value="">How are you feeling?</option>
<option value="Happy">ðŸ˜Š Happy</option>
<option value="Sad">ðŸ˜¢ Sad</option>
<option value="Stressed">ðŸ˜« Stressed</option>
<option value="Excited">ðŸ¤© Excited</option>
<option value="Angry">ðŸ˜¡ Angry</option>
</select>
<button type="submit">Add Expense</button>
</form>
<input type="text" id="search-expense" placeholder="Search Expenses...">
<ul id="expense-list"></ul>
</section>

<!-- Reports -->
<section id="reports">
<h2>Expense Reports</h2>
<div class="chart-container"><canvas id="categoryChart"></canvas></div>
<div class="chart-container"><canvas id="monthlyChart"></canvas></div>
</section>

<!-- Emotions -->
<section id="emotions">
<h2>Emotion Analysis</h2>
<div class="chart-container"><canvas id="emotionChart"></canvas></div>
<p id="emotion-insight" style="font-weight:bold;"></p>
</section>

<!-- Settings -->
<section id="settings">
<h2>Settings</h2>
<form id="budget-form">
<input type="number" id="new-budget" placeholder="Set Total Budget (â‚¹)" required>
<input type="number" id="goal-amount" placeholder="Set Savings Goal (â‚¹)" required>
<button type="submit">Save Budget & Goal</button>
</form>
<button id="reset-btn">Reset All Data</button>
<button id="export-btn">Export CSV</button>
</section>

<!-- Challenge Popup -->
<div id="challenge-popup"><p id="challenge-text"></p><button onclick="closeChallenge()">Close</button></div>

<script>
// Full JavaScript code from previous version (expense handling, dashboard update, gamification, charts, emotion analysis, confetti, mini challenges, search, save/load data)
</script>
</body>
</html>
